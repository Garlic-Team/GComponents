"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GComponentHandler=void 0;var _Constants=require("../util/Constants");class GComponentHandler{constructor(client,components){this.client=client;this.components=components;this.interactionEvent()}interactionEvent(){this.client.on("interactionCreate",async interaction=>{if(!interaction||!interaction.isMessageComponent())return;try{const args=interaction.customId.split("-");const name=args.shift();const component=this.components.get(name);if(!component)return;if(component.type===_Constants.ComponentType.BUTTON&&!interaction.isButton())return;if(component.type===_Constants.ComponentType.SELECT_MENU&&!interaction.isSelectMenu())return;if(component.userRequiredPermissions[0]&&!interaction.memberPermissions.has(component.userRequiredPermissions))return interaction.deferReply();await component.run(interaction,args)}catch(e){this.client.emit(_Constants.Events.DEBUG,e)}})}}exports.GComponentHandler=GComponentHandler;